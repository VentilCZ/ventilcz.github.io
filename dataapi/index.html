<!DOCTYPE html>
<html>

<head>
  <title>Data API documentation</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
</head>

<body>
  <br /><br />
  <div class="container" style="width:600px;">
    <h2 align="center">Data API documentation</h2><br /><br />
    <select name="area" id="area" class="form-control input-lg">
      <option value="">Select area</option>
    </select>
    <br />
    <select name="state" id="state" class="form-control input-lg">
      <option value="">Select state</option>
    </select>
    <br />
    <select name="city" id="city" class="form-control input-lg">
      <option value="">Select city</option>
    </select>
  </div>
</body>

</html>
<script>
  $(document).ready(function() {

    load_json_data('area');

    function load_json_data(id, parent_id) {
      var html_code = '';
      $.getJSON('data_api_structure.json', function(data) {

        html_code += '<option value="">Select ' + id + '</option>';
        $.each(data, function(key, value) {
          if (id == 'area') {
            if (value.parent_id == '0') {
              html_code += '<option value="' + value.id + '">' + value.name + '</option>';
            }
          } else {
            if (value.parent_id == parent_id) {
              html_code += '<option value="' + value.id + '">' + value.name + '</option>';
            }
          }
        });
        $('#' + id).html(html_code);
      });

    }

    $(document).on('change', '#area', function() {
      var area_id = $(this).val();
      if (area_id != '') {
        load_json_data('state', area_id);
        $('#city').html('<option value="">Select city</option>');
      } else {
        $('#state').html('<option value="">Select state</option>');
        $('#city').html('<option value="">Select city</option>');
      }
    });
    $(document).on('change', '#state', function() {
      var state_id = $(this).val();
      if (state_id != '') {
        load_json_data('city', state_id);
      } else {
        $('#city').html('<option value="">Select city</option>');
      }
    });
  });
</script>
